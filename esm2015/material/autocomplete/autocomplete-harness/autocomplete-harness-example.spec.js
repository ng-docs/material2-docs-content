import { __awaiter } from "tslib";
import { TestBed, waitForAsync, inject } from '@angular/core/testing';
import { TestbedHarnessEnvironment } from '@angular/cdk/testing/testbed';
import { MatAutocompleteHarness } from '@angular/material/autocomplete/testing';
import { BrowserDynamicTestingModule, platformBrowserDynamicTesting } from '@angular/platform-browser-dynamic/testing';
import { MatAutocompleteModule } from '@angular/material/autocomplete';
import { AutocompleteHarnessExample } from './autocomplete-harness-example';
import { OverlayContainer } from '@angular/cdk/overlay';
describe('AutocompleteHarnessExample', () => {
    let fixture;
    let loader;
    let overlayContainer;
    beforeAll(() => {
        TestBed.initTestEnvironment(BrowserDynamicTestingModule, platformBrowserDynamicTesting());
    });
    beforeEach(waitForAsync(() => {
        TestBed.configureTestingModule({
            imports: [MatAutocompleteModule],
            declarations: [AutocompleteHarnessExample]
        }).compileComponents();
    }));
    beforeEach(() => {
        fixture = TestBed.createComponent(AutocompleteHarnessExample);
        fixture.detectChanges();
        loader = TestbedHarnessEnvironment.loader(fixture);
        inject([OverlayContainer], (oc) => {
            overlayContainer = oc;
        })();
    });
    afterEach(() => {
        // Angular won't call this for us so we need to do it ourselves to avoid leaks.
        overlayContainer.ngOnDestroy();
        overlayContainer = null;
    });
    it('should load all autocomplete harnesses', () => __awaiter(void 0, void 0, void 0, function* () {
        const autocompletes = yield loader.getAllHarnesses(MatAutocompleteHarness);
        expect(autocompletes.length).toBe(2);
    }));
    it('should get disabled state', () => __awaiter(void 0, void 0, void 0, function* () {
        const enabled = yield loader.getHarness(MatAutocompleteHarness.with({ selector: '#plain' }));
        const disabled = yield loader.getHarness(MatAutocompleteHarness.with({ selector: '#disabled' }));
        expect(yield enabled.isDisabled()).toBe(false);
        expect(yield disabled.isDisabled()).toBe(true);
    }));
    it('should focus and blur an input', () => __awaiter(void 0, void 0, void 0, function* () {
        const input = yield loader.getHarness(MatAutocompleteHarness.with({ selector: '#plain' }));
        expect(yield input.isFocused()).toBe(false);
        yield input.focus();
        expect(yield input.isFocused()).toBe(true);
        yield input.blur();
        expect(yield input.isFocused()).toBe(false);
    }));
    it('should be able to type in an input', () => __awaiter(void 0, void 0, void 0, function* () {
        const input = yield loader.getHarness(MatAutocompleteHarness.with({ selector: '#plain' }));
        yield input.enterText('Hello there');
        expect(yield input.getValue()).toBe('Hello there');
    }));
    it('should be able to get filtered options', () => __awaiter(void 0, void 0, void 0, function* () {
        const input = yield loader.getHarness(MatAutocompleteHarness.with({ selector: '#plain' }));
        yield input.focus();
        const options = yield input.getOptions({ text: /New/ });
        expect(options.length).toBe(1);
        expect(yield options[0].getText()).toBe('New York');
    }));
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXV0b2NvbXBsZXRlLWhhcm5lc3MtZXhhbXBsZS5zcGVjLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vLi4vLi4vc3JjL2NvbXBvbmVudHMtZXhhbXBsZXMvbWF0ZXJpYWwvYXV0b2NvbXBsZXRlL2F1dG9jb21wbGV0ZS1oYXJuZXNzL2F1dG9jb21wbGV0ZS1oYXJuZXNzLWV4YW1wbGUuc3BlYy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsT0FBTyxFQUFDLE9BQU8sRUFBb0IsWUFBWSxFQUFFLE1BQU0sRUFBQyxNQUFNLHVCQUF1QixDQUFDO0FBQ3RGLE9BQU8sRUFBQyx5QkFBeUIsRUFBQyxNQUFNLDhCQUE4QixDQUFDO0FBQ3ZFLE9BQU8sRUFBQyxzQkFBc0IsRUFBQyxNQUFNLHdDQUF3QyxDQUFDO0FBRTlFLE9BQU8sRUFBQywyQkFBMkIsRUFBRSw2QkFBNkIsRUFBQyxNQUM1RCwyQ0FBMkMsQ0FBQztBQUNuRCxPQUFPLEVBQUMscUJBQXFCLEVBQUMsTUFBTSxnQ0FBZ0MsQ0FBQztBQUNyRSxPQUFPLEVBQUMsMEJBQTBCLEVBQUMsTUFBTSxnQ0FBZ0MsQ0FBQztBQUMxRSxPQUFPLEVBQUMsZ0JBQWdCLEVBQUMsTUFBTSxzQkFBc0IsQ0FBQztBQUV0RCxRQUFRLENBQUMsNEJBQTRCLEVBQUUsR0FBRyxFQUFFO0lBQzFDLElBQUksT0FBcUQsQ0FBQztJQUMxRCxJQUFJLE1BQXFCLENBQUM7SUFDMUIsSUFBSSxnQkFBa0MsQ0FBQztJQUV2QyxTQUFTLENBQUMsR0FBRyxFQUFFO1FBQ2IsT0FBTyxDQUFDLG1CQUFtQixDQUFDLDJCQUEyQixFQUFFLDZCQUE2QixFQUFFLENBQUMsQ0FBQztJQUM1RixDQUFDLENBQUMsQ0FBQztJQUVILFVBQVUsQ0FDUixZQUFZLENBQUMsR0FBRyxFQUFFO1FBQ2hCLE9BQU8sQ0FBQyxzQkFBc0IsQ0FBQztZQUM3QixPQUFPLEVBQUUsQ0FBQyxxQkFBcUIsQ0FBQztZQUNoQyxZQUFZLEVBQUUsQ0FBQywwQkFBMEIsQ0FBQztTQUMzQyxDQUFDLENBQUMsaUJBQWlCLEVBQUUsQ0FBQztJQUN6QixDQUFDLENBQUMsQ0FBQyxDQUFDO0lBRU4sVUFBVSxDQUFFLEdBQUcsRUFBRTtRQUNmLE9BQU8sR0FBRyxPQUFPLENBQUMsZUFBZSxDQUFDLDBCQUEwQixDQUFDLENBQUM7UUFDOUQsT0FBTyxDQUFDLGFBQWEsRUFBRSxDQUFDO1FBQ3hCLE1BQU0sR0FBRyx5QkFBeUIsQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUM7UUFDbkQsTUFBTSxDQUFDLENBQUMsZ0JBQWdCLENBQUMsRUFBRSxDQUFDLEVBQW9CLEVBQUUsRUFBRTtZQUNsRCxnQkFBZ0IsR0FBRyxFQUFFLENBQUM7UUFDeEIsQ0FBQyxDQUFDLEVBQUUsQ0FBQztJQUNQLENBQUMsQ0FBQyxDQUFDO0lBRUgsU0FBUyxDQUFDLEdBQUcsRUFBRTtRQUNiLCtFQUErRTtRQUMvRSxnQkFBZ0IsQ0FBQyxXQUFXLEVBQUUsQ0FBQztRQUMvQixnQkFBZ0IsR0FBRyxJQUFLLENBQUM7SUFDM0IsQ0FBQyxDQUFDLENBQUM7SUFFSCxFQUFFLENBQUMsd0NBQXdDLEVBQUUsR0FBUyxFQUFFO1FBQ3BELE1BQU0sYUFBYSxHQUFHLE1BQU0sTUFBTSxDQUFDLGVBQWUsQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDO1FBQzNFLE1BQU0sQ0FBQyxhQUFhLENBQUMsTUFBTSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ3ZDLENBQUMsQ0FBQSxDQUNGLENBQUM7SUFFRixFQUFFLENBQUMsMkJBQTJCLEVBQUUsR0FBUyxFQUFFO1FBQ3pDLE1BQU0sT0FBTyxHQUFHLE1BQU0sTUFBTSxDQUFDLFVBQVUsQ0FBQyxzQkFBc0IsQ0FBQyxJQUFJLENBQUMsRUFBQyxRQUFRLEVBQUUsUUFBUSxFQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzNGLE1BQU0sUUFBUSxHQUFHLE1BQU0sTUFBTSxDQUFDLFVBQVUsQ0FBQyxzQkFBc0IsQ0FBQyxJQUFJLENBQUMsRUFBQyxRQUFRLEVBQUUsV0FBVyxFQUFDLENBQUMsQ0FBQyxDQUFDO1FBRS9GLE1BQU0sQ0FBQyxNQUFNLE9BQU8sQ0FBQyxVQUFVLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUMvQyxNQUFNLENBQUMsTUFBTSxRQUFRLENBQUMsVUFBVSxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDakQsQ0FBQyxDQUFBLENBQUMsQ0FBQztJQUVILEVBQUUsQ0FBQyxnQ0FBZ0MsRUFBRSxHQUFTLEVBQUU7UUFDOUMsTUFBTSxLQUFLLEdBQUcsTUFBTSxNQUFNLENBQUMsVUFBVSxDQUFDLHNCQUFzQixDQUFDLElBQUksQ0FBQyxFQUFDLFFBQVEsRUFBRSxRQUFRLEVBQUMsQ0FBQyxDQUFDLENBQUM7UUFDekYsTUFBTSxDQUFDLE1BQU0sS0FBSyxDQUFDLFNBQVMsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQzVDLE1BQU0sS0FBSyxDQUFDLEtBQUssRUFBRSxDQUFDO1FBQ3BCLE1BQU0sQ0FBQyxNQUFNLEtBQUssQ0FBQyxTQUFTLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUMzQyxNQUFNLEtBQUssQ0FBQyxJQUFJLEVBQUUsQ0FBQztRQUNuQixNQUFNLENBQUMsTUFBTSxLQUFLLENBQUMsU0FBUyxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDOUMsQ0FBQyxDQUFBLENBQUMsQ0FBQztJQUVILEVBQUUsQ0FBQyxvQ0FBb0MsRUFBRSxHQUFTLEVBQUU7UUFDbEQsTUFBTSxLQUFLLEdBQUcsTUFBTSxNQUFNLENBQUMsVUFBVSxDQUFDLHNCQUFzQixDQUFDLElBQUksQ0FBQyxFQUFDLFFBQVEsRUFBRSxRQUFRLEVBQUMsQ0FBQyxDQUFDLENBQUM7UUFDekYsTUFBTSxLQUFLLENBQUMsU0FBUyxDQUFDLGFBQWEsQ0FBQyxDQUFDO1FBQ3JDLE1BQU0sQ0FBQyxNQUFNLEtBQUssQ0FBQyxRQUFRLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQztJQUNyRCxDQUFDLENBQUEsQ0FBQyxDQUFDO0lBRUgsRUFBRSxDQUFDLHdDQUF3QyxFQUFFLEdBQVMsRUFBRTtRQUN0RCxNQUFNLEtBQUssR0FBRyxNQUFNLE1BQU0sQ0FBQyxVQUFVLENBQUMsc0JBQXNCLENBQUMsSUFBSSxDQUFDLEVBQUMsUUFBUSxFQUFFLFFBQVEsRUFBQyxDQUFDLENBQUMsQ0FBQztRQUN6RixNQUFNLEtBQUssQ0FBQyxLQUFLLEVBQUUsQ0FBQztRQUNwQixNQUFNLE9BQU8sR0FBRyxNQUFNLEtBQUssQ0FBQyxVQUFVLENBQUMsRUFBQyxJQUFJLEVBQUUsS0FBSyxFQUFDLENBQUMsQ0FBQztRQUV0RCxNQUFNLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUMvQixNQUFNLENBQUMsTUFBTSxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUM7SUFDdEQsQ0FBQyxDQUFBLENBQUMsQ0FBQztBQUNMLENBQUMsQ0FBQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtUZXN0QmVkLCBDb21wb25lbnRGaXh0dXJlLCB3YWl0Rm9yQXN5bmMsIGluamVjdH0gZnJvbSAnQGFuZ3VsYXIvY29yZS90ZXN0aW5nJztcbmltcG9ydCB7VGVzdGJlZEhhcm5lc3NFbnZpcm9ubWVudH0gZnJvbSAnQGFuZ3VsYXIvY2RrL3Rlc3RpbmcvdGVzdGJlZCc7XG5pbXBvcnQge01hdEF1dG9jb21wbGV0ZUhhcm5lc3N9IGZyb20gJ0Bhbmd1bGFyL21hdGVyaWFsL2F1dG9jb21wbGV0ZS90ZXN0aW5nJztcbmltcG9ydCB7SGFybmVzc0xvYWRlcn0gZnJvbSAnQGFuZ3VsYXIvY2RrL3Rlc3RpbmcnO1xuaW1wb3J0IHtCcm93c2VyRHluYW1pY1Rlc3RpbmdNb2R1bGUsIHBsYXRmb3JtQnJvd3NlckR5bmFtaWNUZXN0aW5nfVxuICBmcm9tICdAYW5ndWxhci9wbGF0Zm9ybS1icm93c2VyLWR5bmFtaWMvdGVzdGluZyc7XG5pbXBvcnQge01hdEF1dG9jb21wbGV0ZU1vZHVsZX0gZnJvbSAnQGFuZ3VsYXIvbWF0ZXJpYWwvYXV0b2NvbXBsZXRlJztcbmltcG9ydCB7QXV0b2NvbXBsZXRlSGFybmVzc0V4YW1wbGV9IGZyb20gJy4vYXV0b2NvbXBsZXRlLWhhcm5lc3MtZXhhbXBsZSc7XG5pbXBvcnQge092ZXJsYXlDb250YWluZXJ9IGZyb20gJ0Bhbmd1bGFyL2Nkay9vdmVybGF5JztcblxuZGVzY3JpYmUoJ0F1dG9jb21wbGV0ZUhhcm5lc3NFeGFtcGxlJywgKCkgPT4ge1xuICBsZXQgZml4dHVyZTogQ29tcG9uZW50Rml4dHVyZTxBdXRvY29tcGxldGVIYXJuZXNzRXhhbXBsZT47XG4gIGxldCBsb2FkZXI6IEhhcm5lc3NMb2FkZXI7XG4gIGxldCBvdmVybGF5Q29udGFpbmVyOiBPdmVybGF5Q29udGFpbmVyO1xuXG4gIGJlZm9yZUFsbCgoKSA9PiB7XG4gICAgVGVzdEJlZC5pbml0VGVzdEVudmlyb25tZW50KEJyb3dzZXJEeW5hbWljVGVzdGluZ01vZHVsZSwgcGxhdGZvcm1Ccm93c2VyRHluYW1pY1Rlc3RpbmcoKSk7XG4gIH0pO1xuXG4gIGJlZm9yZUVhY2goXG4gICAgd2FpdEZvckFzeW5jKCgpID0+IHtcbiAgICAgIFRlc3RCZWQuY29uZmlndXJlVGVzdGluZ01vZHVsZSh7XG4gICAgICAgIGltcG9ydHM6IFtNYXRBdXRvY29tcGxldGVNb2R1bGVdLFxuICAgICAgICBkZWNsYXJhdGlvbnM6IFtBdXRvY29tcGxldGVIYXJuZXNzRXhhbXBsZV1cbiAgICAgIH0pLmNvbXBpbGVDb21wb25lbnRzKCk7XG4gICAgfSkpO1xuXG4gIGJlZm9yZUVhY2goICgpID0+IHtcbiAgICBmaXh0dXJlID0gVGVzdEJlZC5jcmVhdGVDb21wb25lbnQoQXV0b2NvbXBsZXRlSGFybmVzc0V4YW1wbGUpO1xuICAgIGZpeHR1cmUuZGV0ZWN0Q2hhbmdlcygpO1xuICAgIGxvYWRlciA9IFRlc3RiZWRIYXJuZXNzRW52aXJvbm1lbnQubG9hZGVyKGZpeHR1cmUpO1xuICAgIGluamVjdChbT3ZlcmxheUNvbnRhaW5lcl0sIChvYzogT3ZlcmxheUNvbnRhaW5lcikgPT4ge1xuICAgICAgb3ZlcmxheUNvbnRhaW5lciA9IG9jO1xuICAgIH0pKCk7XG4gIH0pO1xuXG4gIGFmdGVyRWFjaCgoKSA9PiB7XG4gICAgLy8gQW5ndWxhciB3b24ndCBjYWxsIHRoaXMgZm9yIHVzIHNvIHdlIG5lZWQgdG8gZG8gaXQgb3Vyc2VsdmVzIHRvIGF2b2lkIGxlYWtzLlxuICAgIG92ZXJsYXlDb250YWluZXIubmdPbkRlc3Ryb3koKTtcbiAgICBvdmVybGF5Q29udGFpbmVyID0gbnVsbCE7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgbG9hZCBhbGwgYXV0b2NvbXBsZXRlIGhhcm5lc3NlcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGF1dG9jb21wbGV0ZXMgPSBhd2FpdCBsb2FkZXIuZ2V0QWxsSGFybmVzc2VzKE1hdEF1dG9jb21wbGV0ZUhhcm5lc3MpO1xuICAgICAgZXhwZWN0KGF1dG9jb21wbGV0ZXMubGVuZ3RoKS50b0JlKDIpO1xuICAgIH1cbiAgKTtcblxuICBpdCgnc2hvdWxkIGdldCBkaXNhYmxlZCBzdGF0ZScsIGFzeW5jICgpID0+IHtcbiAgICBjb25zdCBlbmFibGVkID0gYXdhaXQgbG9hZGVyLmdldEhhcm5lc3MoTWF0QXV0b2NvbXBsZXRlSGFybmVzcy53aXRoKHtzZWxlY3RvcjogJyNwbGFpbid9KSk7XG4gICAgY29uc3QgZGlzYWJsZWQgPSBhd2FpdCBsb2FkZXIuZ2V0SGFybmVzcyhNYXRBdXRvY29tcGxldGVIYXJuZXNzLndpdGgoe3NlbGVjdG9yOiAnI2Rpc2FibGVkJ30pKTtcblxuICAgIGV4cGVjdChhd2FpdCBlbmFibGVkLmlzRGlzYWJsZWQoKSkudG9CZShmYWxzZSk7XG4gICAgZXhwZWN0KGF3YWl0IGRpc2FibGVkLmlzRGlzYWJsZWQoKSkudG9CZSh0cnVlKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBmb2N1cyBhbmQgYmx1ciBhbiBpbnB1dCcsIGFzeW5jICgpID0+IHtcbiAgICBjb25zdCBpbnB1dCA9IGF3YWl0IGxvYWRlci5nZXRIYXJuZXNzKE1hdEF1dG9jb21wbGV0ZUhhcm5lc3Mud2l0aCh7c2VsZWN0b3I6ICcjcGxhaW4nfSkpO1xuICAgIGV4cGVjdChhd2FpdCBpbnB1dC5pc0ZvY3VzZWQoKSkudG9CZShmYWxzZSk7XG4gICAgYXdhaXQgaW5wdXQuZm9jdXMoKTtcbiAgICBleHBlY3QoYXdhaXQgaW5wdXQuaXNGb2N1c2VkKCkpLnRvQmUodHJ1ZSk7XG4gICAgYXdhaXQgaW5wdXQuYmx1cigpO1xuICAgIGV4cGVjdChhd2FpdCBpbnB1dC5pc0ZvY3VzZWQoKSkudG9CZShmYWxzZSk7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgYmUgYWJsZSB0byB0eXBlIGluIGFuIGlucHV0JywgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IGlucHV0ID0gYXdhaXQgbG9hZGVyLmdldEhhcm5lc3MoTWF0QXV0b2NvbXBsZXRlSGFybmVzcy53aXRoKHtzZWxlY3RvcjogJyNwbGFpbid9KSk7XG4gICAgYXdhaXQgaW5wdXQuZW50ZXJUZXh0KCdIZWxsbyB0aGVyZScpO1xuICAgIGV4cGVjdChhd2FpdCBpbnB1dC5nZXRWYWx1ZSgpKS50b0JlKCdIZWxsbyB0aGVyZScpO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIGJlIGFibGUgdG8gZ2V0IGZpbHRlcmVkIG9wdGlvbnMnLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgaW5wdXQgPSBhd2FpdCBsb2FkZXIuZ2V0SGFybmVzcyhNYXRBdXRvY29tcGxldGVIYXJuZXNzLndpdGgoe3NlbGVjdG9yOiAnI3BsYWluJ30pKTtcbiAgICBhd2FpdCBpbnB1dC5mb2N1cygpO1xuICAgIGNvbnN0IG9wdGlvbnMgPSBhd2FpdCBpbnB1dC5nZXRPcHRpb25zKHt0ZXh0OiAvTmV3L30pO1xuXG4gICAgZXhwZWN0KG9wdGlvbnMubGVuZ3RoKS50b0JlKDEpO1xuICAgIGV4cGVjdChhd2FpdCBvcHRpb25zWzBdLmdldFRleHQoKSkudG9CZSgnTmV3IFlvcmsnKTtcbiAgfSk7XG59KTtcbiJdfQ==