import { __awaiter } from "tslib";
import { TestBed, waitForAsync } from '@angular/core/testing';
import { TestbedHarnessEnvironment } from '@angular/cdk/testing/testbed';
import { MatSortHarness } from '@angular/material/sort/testing';
import { parallel } from '@angular/cdk/testing';
import { BrowserDynamicTestingModule, platformBrowserDynamicTesting } from '@angular/platform-browser-dynamic/testing';
import { MatSortModule } from '@angular/material/sort';
import { SortHarnessExample } from './sort-harness-example';
import { NoopAnimationsModule } from '@angular/platform-browser/animations';
describe('SortHarnessExample', () => {
    let fixture;
    let loader;
    beforeAll(() => {
        TestBed.initTestEnvironment(BrowserDynamicTestingModule, platformBrowserDynamicTesting());
    });
    beforeEach(waitForAsync(() => {
        TestBed.configureTestingModule({
            imports: [MatSortModule, NoopAnimationsModule],
            declarations: [SortHarnessExample]
        }).compileComponents();
        fixture = TestBed.createComponent(SortHarnessExample);
        fixture.detectChanges();
        loader = TestbedHarnessEnvironment.loader(fixture);
    }));
    it('should load harness for mat-sort', () => __awaiter(void 0, void 0, void 0, function* () {
        const sorts = yield loader.getAllHarnesses(MatSortHarness);
        expect(sorts.length).toBe(1);
    }));
    it('should be able to filter headers by their sorted state', () => __awaiter(void 0, void 0, void 0, function* () {
        const sort = yield loader.getHarness(MatSortHarness);
        let headers = yield sort.getSortHeaders({ sortDirection: '' });
        expect(headers.length).toBe(5);
        yield headers[0].click();
        headers = yield sort.getSortHeaders({ sortDirection: 'asc' });
        expect(headers.length).toBe(1);
    }));
    it('should be able to get the label of a header', () => __awaiter(void 0, void 0, void 0, function* () {
        const sort = yield loader.getHarness(MatSortHarness);
        const headers = yield sort.getSortHeaders();
        const labels = yield parallel(() => headers.map(header => header.getLabel()));
        expect(labels).toEqual(['Dessert', 'Calories', 'Fat', 'Carbs', 'Protein']);
    }));
    it('should get the disabled state of a header', () => __awaiter(void 0, void 0, void 0, function* () {
        const sort = yield loader.getHarness(MatSortHarness);
        const thirdHeader = (yield sort.getSortHeaders())[2];
        expect(yield thirdHeader.isDisabled()).toBe(false);
        fixture.componentInstance.disableThirdHeader = true;
        fixture.detectChanges();
        expect(yield thirdHeader.isDisabled()).toBe(true);
    }));
    it('should get the sorted direction of a header', () => __awaiter(void 0, void 0, void 0, function* () {
        const sort = yield loader.getHarness(MatSortHarness);
        const secondHeader = (yield sort.getSortHeaders())[1];
        expect(yield secondHeader.getSortDirection()).toBe('');
        yield secondHeader.click();
        expect(yield secondHeader.getSortDirection()).toBe('asc');
        yield secondHeader.click();
        expect(yield secondHeader.getSortDirection()).toBe('desc');
    }));
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic29ydC1oYXJuZXNzLWV4YW1wbGUuc3BlYy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uLy4uLy4uL3NyYy9jb21wb25lbnRzLWV4YW1wbGVzL21hdGVyaWFsL3NvcnQvc29ydC1oYXJuZXNzL3NvcnQtaGFybmVzcy1leGFtcGxlLnNwZWMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLE9BQU8sRUFBQyxPQUFPLEVBQW9CLFlBQVksRUFBQyxNQUFNLHVCQUF1QixDQUFDO0FBQzlFLE9BQU8sRUFBQyx5QkFBeUIsRUFBQyxNQUFNLDhCQUE4QixDQUFDO0FBQ3ZFLE9BQU8sRUFBQyxjQUFjLEVBQUMsTUFBTSxnQ0FBZ0MsQ0FBQztBQUM5RCxPQUFPLEVBQWdCLFFBQVEsRUFBQyxNQUFNLHNCQUFzQixDQUFDO0FBQzdELE9BQU8sRUFBQywyQkFBMkIsRUFBRSw2QkFBNkIsRUFBQyxNQUM1RCwyQ0FBMkMsQ0FBQztBQUNuRCxPQUFPLEVBQUMsYUFBYSxFQUFDLE1BQU0sd0JBQXdCLENBQUM7QUFDckQsT0FBTyxFQUFDLGtCQUFrQixFQUFDLE1BQU0sd0JBQXdCLENBQUM7QUFDMUQsT0FBTyxFQUFDLG9CQUFvQixFQUFDLE1BQU0sc0NBQXNDLENBQUM7QUFFMUUsUUFBUSxDQUFDLG9CQUFvQixFQUFFLEdBQUcsRUFBRTtJQUNsQyxJQUFJLE9BQTZDLENBQUM7SUFDbEQsSUFBSSxNQUFxQixDQUFDO0lBRTFCLFNBQVMsQ0FBQyxHQUFHLEVBQUU7UUFDYixPQUFPLENBQUMsbUJBQW1CLENBQUMsMkJBQTJCLEVBQUUsNkJBQTZCLEVBQUUsQ0FBQyxDQUFDO0lBQzVGLENBQUMsQ0FBQyxDQUFDO0lBRUgsVUFBVSxDQUNSLFlBQVksQ0FBQyxHQUFHLEVBQUU7UUFDaEIsT0FBTyxDQUFDLHNCQUFzQixDQUFDO1lBQzdCLE9BQU8sRUFBRSxDQUFDLGFBQWEsRUFBRSxvQkFBb0IsQ0FBQztZQUM5QyxZQUFZLEVBQUUsQ0FB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QztRQUNyRCxNQUFNLFlBQVksR0FBRyxDQUFDLE1BQU0sSUFBSSxDQUFDLGNBQWMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFFdEQsTUFBTSxDQUFDLE1BQU0sWUFBWSxDQUFDLGdCQUFnQixFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUM7UUFFdkQsTUFBTSxZQUFZLENBQUMsS0FBSyxFQUFFLENBQUM7UUFDM0IsTUFBTSxDQUFDLE1BQU0sWUFBWSxDQUFDLGdCQUFnQixFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7UUFFMUQsTUFBTSxZQUFZLENBQUMsS0FBSyxFQUFFLENBQUM7UUFDM0IsTUFBTSxDQUFDLE1BQU0sWUFBWSxDQUFDLGdCQUFnQixFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7SUFDN0QsQ0FBQyxDQUFBLENBQUMsQ0FBQztBQUNMLENBQUMsQ0FBQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtUZXN0QmVkLCBDb21wb25lbnRGaXh0dXJlLCB3YWl0Rm9yQXN5bmN9IGZyb20gJ0Bhbmd1bGFyL2NvcmUvdGVzdGluZyc7XG5pbXBvcnQge1Rlc3RiZWRIYXJuZXNzRW52aXJvbm1lbnR9IGZyb20gJ0Bhbmd1bGFyL2Nkay90ZXN0aW5nL3Rlc3RiZWQnO1xuaW1wb3J0IHtNYXRTb3J0SGFybmVzc30gZnJvbSAnQGFuZ3VsYXIvbWF0ZXJpYWwvc29ydC90ZXN0aW5nJztcbmltcG9ydCB7SGFybmVzc0xvYWRlciwgcGFyYWxsZWx9IGZyb20gJ0Bhbmd1bGFyL2Nkay90ZXN0aW5nJztcbmltcG9ydCB7QnJvd3NlckR5bmFtaWNUZXN0aW5nTW9kdWxlLCBwbGF0Zm9ybUJyb3dzZXJEeW5hbWljVGVzdGluZ31cbiAgZnJvbSAnQGFuZ3VsYXIvcGxhdGZvcm0tYnJvd3Nlci1keW5hbWljL3Rlc3RpbmcnO1xuaW1wb3J0IHtNYXRTb3J0TW9kdWxlfSBmcm9tICdAYW5ndWxhci9tYXRlcmlhbC9zb3J0JztcbmltcG9ydCB7U29ydEhhcm5lc3NFeGFtcGxlfSBmcm9tICcuL3NvcnQtaGFybmVzcy1leGFtcGxlJztcbmltcG9ydCB7Tm9vcEFuaW1hdGlvbnNNb2R1bGV9IGZyb20gJ0Bhbmd1bGFyL3BsYXRmb3JtLWJyb3dzZXIvYW5pbWF0aW9ucyc7XG5cbmRlc2NyaWJlKCdTb3J0SGFybmVzc0V4YW1wbGUnLCAoKSA9PiB7XG4gIGxldCBmaXh0dXJlOiBDb21wb25lbnRGaXh0dXJlPFNvcnRIYXJuZXNzRXhhbXBsZT47XG4gIGxldCBsb2FkZXI6IEhhcm5lc3NMb2FkZXI7XG5cbiAgYmVmb3JlQWxsKCgpID0+IHtcbiAgICBUZXN0QmVkLmluaXRUZXN0RW52aXJvbm1lbnQoQnJvd3NlckR5bmFtaWNUZXN0aW5nTW9kdWxlLCBwbGF0Zm9ybUJyb3dzZXJEeW5hbWljVGVzdGluZygpKTtcbiAgfSk7XG5cbiAgYmVmb3JlRWFjaChcbiAgICB3YWl0Rm9yQXN5bmMoKCkgPT4ge1xuICAgICAgVGVzdEJlZC5jb25maWd1cmVUZXN0aW5nTW9kdWxlKHtcbiAgICAgICAgaW1wb3J0czogW01hdFNvcnRNb2R1bGUsIE5vb3BBbmltYXRpb25zTW9kdWxlXSxcbiAgICAgICAgZGVjbGFyYXRpb25zOiBbU29ydEhhcm5lc3NFeGFtcGxlXVxuICAgICAgfSkuY29tcGlsZUNvbXBvbmVudHMoKTtcbiAgICAgIGZpeHR1cmUgPSBUZXN0QmVkLmNyZWF0ZUNvbXBvbmVudChTb3J0SGFybmVzc0V4YW1wbGUpO1xuICAgICAgZml4dHVyZS5kZXRlY3RDaGFuZ2VzKCk7XG4gICAgICBsb2FkZXIgPSBUZXN0YmVkSGFybmVzc0Vudmlyb25tZW50LmxvYWRlcihmaXh0dXJlKTtcbiAgICB9KVxuICApO1xuXG4gIGl0KCdzaG91bGQgbG9hZCBoYXJuZXNzIGZvciBtYXQtc29ydCcsIGFzeW5jICgpID0+IHtcbiAgICBjb25zdCBzb3J0cyA9IGF3YWl0IGxvYWRlci5nZXRBbGxIYXJuZXNzZXMoTWF0U29ydEhhcm5lc3MpO1xuICAgIGV4cGVjdChzb3J0cy5sZW5ndGgpLnRvQmUoMSk7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgYmUgYWJsZSB0byBmaWx0ZXIgaGVhZGVycyBieSB0aGVpciBzb3J0ZWQgc3RhdGUnLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc3Qgc29ydCA9IGF3YWl0IGxvYWRlci5nZXRIYXJuZXNzKE1hdFNvcnRIYXJuZXNzKTtcbiAgICBsZXQgaGVhZGVycyA9IGF3YWl0IHNvcnQuZ2V0U29ydEhlYWRlcnMoe3NvcnREaXJlY3Rpb246ICcnfSk7XG4gICAgZXhwZWN0KGhlYWRlcnMubGVuZ3RoKS50b0JlKDUpO1xuXG4gICAgYXdhaXQgaGVhZGVyc1swXS5jbGljaygpO1xuXG4gICAgaGVhZGVycyA9IGF3YWl0IHNvcnQuZ2V0U29ydEhlYWRlcnMoe3NvcnREaXJlY3Rpb246ICdhc2MnfSk7XG5cbiAgICBleHBlY3QoaGVhZGVycy5sZW5ndGgpLnRvQmUoMSk7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgYmUgYWJsZSB0byBnZXQgdGhlIGxhYmVsIG9mIGEgaGVhZGVyJywgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IHNvcnQgPSBhd2FpdCBsb2FkZXIuZ2V0SGFybmVzcyhNYXRTb3J0SGFybmVzcyk7XG4gICAgY29uc3QgaGVhZGVycyA9IGF3YWl0IHNvcnQuZ2V0U29ydEhlYWRlcnMoKTtcbiAgICBjb25zdCBsYWJlbHMgPSBhd2FpdCBwYXJhbGxlbCgoKSA9PiBoZWFkZXJzLm1hcChoZWFkZXIgPT4gaGVhZGVyLmdldExhYmVsKCkpKTtcbiAgICBleHBlY3QobGFiZWxzKS50b0VxdWFsKFsnRGVzc2VydCcsICdDYWxvcmllcycsICdGYXQnLCAnQ2FyYnMnLCAnUHJvdGVpbiddKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBnZXQgdGhlIGRpc2FibGVkIHN0YXRlIG9mIGEgaGVhZGVyJywgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IHNvcnQgPSBhd2FpdCBsb2FkZXIuZ2V0SGFybmVzcyhNYXRTb3J0SGFybmVzcyk7XG4gICAgY29uc3QgdGhpcmRIZWFkZXIgPSAoYXdhaXQgc29ydC5nZXRTb3J0SGVhZGVycygpKVsyXTtcblxuICAgIGV4cGVjdChhd2FpdCB0aGlyZEhlYWRlci5pc0Rpc2FibGVkKCkpLnRvQmUoZmFsc2UpO1xuXG4gICAgZml4dHVyZS5jb21wb25lbnRJbnN0YW5jZS5kaXNhYmxlVGhpcmRIZWFkZXIgPSB0cnVlO1xuICAgIGZpeHR1cmUuZGV0ZWN0Q2hhbmdlcygpO1xuXG4gICAgZXhwZWN0KGF3YWl0IHRoaXJkSGVhZGVyLmlzRGlzYWJsZWQoKSkudG9CZSh0cnVlKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBnZXQgdGhlIHNvcnRlZCBkaXJlY3Rpb24gb2YgYSBoZWFkZXInLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc3Qgc29ydCA9IGF3YWl0IGxvYWRlci5nZXRIYXJuZXNzKE1hdFNvcnRIYXJuZXNzKTtcbiAgICBjb25zdCBzZWNvbmRIZWFkZXIgPSAoYXdhaXQgc29ydC5nZXRTb3J0SGVhZGVycygpKVsxXTtcblxuICAgIGV4cGVjdChhd2FpdCBzZWNvbmRIZWFkZXIuZ2V0U29ydERpcmVjdGlvbigpKS50b0JlKCcnKTtcblxuICAgIGF3YWl0IHNlY29uZEhlYWRlci5jbGljaygpO1xuICAgIGV4cGVjdChhd2FpdCBzZWNvbmRIZWFkZXIuZ2V0U29ydERpcmVjdGlvbigpKS50b0JlKCdhc2MnKTtcblxuICAgIGF3YWl0IHNlY29uZEhlYWRlci5jbGljaygpO1xuICAgIGV4cGVjdChhd2FpdCBzZWNvbmRIZWFkZXIuZ2V0U29ydERpcmVjdGlvbigpKS50b0JlKCdkZXNjJyk7XG4gIH0pO1xufSk7XG4iXX0=